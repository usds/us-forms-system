{"version":3,"sources":["../../../src/js/state/reducers.js"],"names":["OPEN_REVIEW_CHAPTER","state","action","openChapters","reviewPageView","openedChapter","CLOSE_REVIEW_CHAPTER","filter","value","closedChapter","newState","viewedPages","Set","pageKeys","forEach","add","pageKey","SET_DATA","data","SET_EDIT_MODE","pages","page","showPagePerItem","index","edit","SET_PRE_SUBMIT","preSubmitField","preSubmitAccepted","SET_SUBMISSION","field","extra","submission","SET_SUBMITTED","response","status","SET_VIEWED_PAGES"],"mappings":"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","file":"reducers.js","sourcesContent":["import _ from 'lodash/fp';\n\nimport {\n  CLOSE_REVIEW_CHAPTER,\n  OPEN_REVIEW_CHAPTER,\n  SET_DATA,\n  SET_EDIT_MODE,\n  SET_PRE_SUBMIT,\n  SET_SUBMISSION,\n  SET_SUBMITTED,\n  SET_VIEWED_PAGES\n} from '../actions';\n\nimport {\n  recalculateSchemaAndData\n} from '../state/helpers';\n\nexport default {\n  [OPEN_REVIEW_CHAPTER]: (state, action) => {\n    const openChapters = [\n      ...state.reviewPageView.openChapters,\n      action.openedChapter\n    ];\n\n    return _.set('reviewPageView.openChapters', openChapters, state);\n  },\n  [CLOSE_REVIEW_CHAPTER]: (state, action) => {\n    const openChapters = state\n      .reviewPageView\n      .openChapters\n      .filter(value => value !== action.closedChapter);\n\n    const newState = _.set('reviewPageView.openChapters', openChapters, state);\n\n    const viewedPages = new Set(state\n      .reviewPageView\n      .viewedPages);\n\n    action.pageKeys.forEach(pageKey => viewedPages.add(pageKey));\n\n    return _.set('reviewPageView.viewedPages', viewedPages, newState);\n  },\n  [SET_DATA]: (state, action) => {\n    const newState = _.set('data', action.data, state);\n\n    return recalculateSchemaAndData(newState);\n  },\n  [SET_EDIT_MODE]: (state, action) => {\n    if (state.pages[action.page].showPagePerItem) {\n      return _.set(['pages', action.page, 'editMode', action.index], action.edit, state);\n    }\n    return _.set(['pages', action.page, 'editMode'], action.edit, state);\n  },\n  [SET_PRE_SUBMIT]: (state, action) => {\n    return { ...state, data: { ...state.data, [action.preSubmitField]: action.preSubmitAccepted } };\n  },\n  [SET_SUBMISSION]: (state, action) => {\n    const newState = _.set(['submission', action.field], action.value, state);\n    if (action.extra) {\n      newState.submission.extra = action.extra;\n    }\n\n    return newState;\n  },\n  [SET_SUBMITTED]: (state, action) => {\n    const submission = _.assign(state.submission, {\n      response: action.response,\n      status: 'applicationSubmitted'\n    });\n\n    return _.set('submission', submission, state);\n  },\n  [SET_VIEWED_PAGES]: (state, action) => {\n    const viewedPages = new Set(state\n      .reviewPageView\n      .viewedPages);\n\n    action.pageKeys.forEach(pageKey => viewedPages.add(pageKey));\n\n    return _.set('reviewPageView.viewedPages', viewedPages, state);\n  }\n};\n"]}